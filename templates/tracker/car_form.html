{% extends 'base.html' %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h3 class="mb-0">
                    <i class="fas fa-car"></i> {{ title }}
                </h3>
            </div>
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="{{ form.brand.id_for_label }}" class="form-label">
                                    <i class="fas fa-tag"></i> Марка
                                </label>
                                {{ form.brand }}
                                {% if form.brand.errors %}
                                    <div class="text-danger small">{{ form.brand.errors }}</div>
                                {% endif %}
                            </div>
                            
                            <div class="mb-3">
                                <label for="{{ form.model.id_for_label }}" class="form-label">
                                    <i class="fas fa-car-side"></i> Модель
                                </label>
                                {{ form.model }}
                                {% if form.model.errors %}
                                    <div class="text-danger small">{{ form.model.errors }}</div>
                                {% endif %}
                            </div>
                            
                            <div class="mb-3">
                                <label for="{{ form.year.id_for_label }}" class="form-label">
                                    <i class="fas fa-calendar"></i> Год выпуска
                                </label>
                                {{ form.year }}
                                {% if form.year.errors %}
                                    <div class="text-danger small">{{ form.year.errors }}</div>
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="{{ form.fuel_type.id_for_label }}" class="form-label">
                                    <i class="fas fa-gas-pump"></i> Тип топлива
                                </label>
                                {{ form.fuel_type }}
                                {% if form.fuel_type.errors %}
                                    <div class="text-danger small">{{ form.fuel_type.errors }}</div>
                                {% endif %}
                            </div>
                            
                            <div class="mb-3">
                                <label for="{{ form.engine_volume.id_for_label }}" class="form-label">
                                    <i class="fas fa-tachometer-alt"></i> Объем двигателя (л)
                                </label>
                                {{ form.engine_volume }}
                                {% if form.engine_volume.errors %}
                                    <div class="text-danger small">{{ form.engine_volume.errors }}</div>
                                {% endif %}
                            </div>
                            
                            <div class="mb-3">
                                <label for="{{ form.average_consumption.id_for_label }}" class="form-label">
                                    <i class="fas fa-chart-line"></i> Средний расход (л/100км)
                                </label>
                                {{ form.average_consumption }}
                                {% if form.average_consumption.errors %}
                                    <div class="text-danger small">{{ form.average_consumption.errors }}</div>
                                {% endif %}
                                <div class="form-text">Укажите примерный расход вашего автомобиля</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-save"></i> Сохранить автомобиль
                        </button>
                        <a href="{% url 'car-list' %}" class="btn btn-secondary">
                            <i class="fas fa-times"></i> Отмена
                        </a>
                    </div>
                </form>
            </div>
        </div>
        
        {% if title == 'Добавить автомобиль' %}
        <div class="card mt-4">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0">
                    <i class="fas fa-info-circle"></i> Подсказка по заполнению
                </h5>
            </div>
            <div class="card-body">
                <ul class="mb-0">
                    <li><strong>Тип топлива:</strong> Выберите тот, который использует ваш автомобиль</li>
                    <li><strong>Объем двигателя:</strong> Например, 1.6, 2.0, 3.5 литров</li>
                    <li><strong>Средний расход:</strong> Можно взять из технических характеристик или рассчитать позже</li>
                </ul>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Автоматическое форматирование полей
        const yearInput = document.querySelector('#{{ form.year.id_for_label }}');
        if (yearInput) {
            const currentYear = new Date().getFullYear();
            yearInput.setAttribute('min', '1990');
            yearInput.setAttribute('max', currentYear.toString());
        }
    });
</script>
{% endblock %}